<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>make10</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            color: #333;
            overflow: hidden;
        }

        #game-container {
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 40px;
            text-align: center;
            width: 90%;
            max-width: 800px;
            box-sizing: border-box;
            position: relative;
        }

        /* ------------------- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ ------------------- */
        #start-screen {
            display: block;
        }

        #start-screen h1 {
            font-family: 'Chakra Petch', sans-serif;
            font-size: 3.5em;
            color: #4CAF50;
            margin-bottom: 40px; /* ä½™ç™½ã‚’èª¿æ•´ */
            letter-spacing: 3px;
        }

        /* â†“â†“â†“ ã“ã“ã‹ã‚‰ãŒæ–°ã—ã„ã‚¹ã‚¿ã‚¤ãƒ« â†“â†“â†“ */
        #start-options-container {
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
        }

        .start-column {
            flex-basis: 48%;
        }
        
        .start-column h2 {
            font-size: 1.5em;
            color: #555;
            margin-bottom: 15px;
        }
        
        .difficulty-options, .mode-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }
        /* â†‘â†‘â†‘ ã“ã“ã¾ã§ãŒæ–°ã—ã„ã‚¹ã‚¿ã‚¤ãƒ« â†‘â†‘â†‘ */
        
        .difficulty-option, .mode-option {
            font-size: 1.5em; /* å°‘ã—ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’èª¿æ•´ */
            padding: 15px 20px;
            border: 3px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            width: 100%; /* æ¨ªå¹…ã‚’ã‚«ãƒ©ãƒ ã«åˆã‚ã›ã‚‹ */
            max-width: 300px;
            box-sizing: border-box;
            color: #555;
            font-weight: bold;
        }

        .difficulty-option:hover, .mode-option:hover {
            background-color: #e0e0e0;
        }

        /* ã€è‰²å¤‰æ›´ã€‘é›£æ˜“åº¦é¸æŠã‚’é»„è‰²ã«å¤‰æ›´ */
        .difficulty-option.selected {
            border-color: #FFC107;
            background-color: #FFFDE7;
            box-shadow: 0 0 15px rgba(255, 193, 7, 0.5);
            color: #333;
        }
        
        /* ãƒ¢ãƒ¼ãƒ‰é¸æŠã®é’è‰²ã¯ãã®ã¾ã¾ */
        .mode-option.selected {
            border-color: #2196F3;
            background-color: #e3f2fd;
            box-shadow: 0 0 15px rgba(33, 150, 243, 0.4);
            color: #333;
        }

        .start-message {
            font-size: 1.2em;
            color: #666;
        }

        /* ------------------- ã‚²ãƒ¼ãƒ ç”»é¢ ------------------- */
        #game-screen {
            display: none;
	    position: relative;
        }

        #question-counter {
            font-size: 1.4em;
            color: #777;
            margin-bottom: 20px;
            font-weight: bold;
        }

        #expression-display {
            background-color: #e0f2f7;
            border: 2px solid #a7d9ee;
            border-radius: 8px;
	    height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.2em;
            margin-bottom: 30px;
            padding: 10px;
            box-sizing: border-box;
            color: #2196F3;
            /*overflow-x: auto;  æ¨ªã«é•·ã„å¼ãŒå‡ºãŸå ´åˆã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã‚’è¡¨ç¤ºã£ã¦ã‚„ã¤*/
            white-space: nowrap;
	    /* line-height: 1.2;  ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã«åˆã‚ã›ã¦èª¿æ•´ */
	    /* padding-top: 10px;  ä¸Šä¸‹ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’èª¿æ•´ã—ã¦ä¸­å¤®å¯„ã›ã‚’ç¶­æŒ */
	    /* padding-bottom: 10px;  ä¸Šä¸‹ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’èª¿æ•´ã—ã¦ä¸­å¤®å¯„ã›ã‚’ç¶­æŒ */
        }

	/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã®èª¿æ•´ */
	@media (max-width: 768px) {
	    #expression-display {
	        font-size: 1.8em;
	        height: 50px;
	    }
	}

	@media (max-width: 480px) {
	    #expression-display {
	        font-size: 1.5em;
	        height: 45px;
	    }
	}

        .card-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .card {
            width: 80px;
            height: 120px;
            background-color: #fff;
            border: 2px solid #333;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3.5em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
        }

        .card.number-card {
            color: #333;
        }

        .card.operator-card {
            font-size: 2.5em; /* è¨˜å·ã¯å°‘ã—å°ã•ã‚ã« */
            color: #673AB7; /* ç´«è‰² */
            border-color: #673AB7;
        }

        .card:hover:not(.disabled) {
            transform: translateY(-5px);
            box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.2);
        }

        .card.disabled {
            opacity: 0.4;
            background-color: #ccc;
            cursor: not-allowed;
            box-shadow: none;
        }

        .button-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .action-button {
            padding: 15px 30px;
            font-size: 1.5em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
            font-weight: bold;
            color: #fff;
        }

	#undo-button {
	    background-color: #2196F3; /* é’è‰² */
	}

	#undo-button:hover {
	    background-color: #1976D2; /* ãƒ›ãƒãƒ¼æ™‚ã®å°‘ã—æ¿ƒã„é’è‰² */
	}

        #reset-button {
            background-color: #FF9800; /* ã‚ªãƒ¬ãƒ³ã‚¸ */
        }

        #reset-button:hover {
            background-color: #FB8C00;
        }

        #submit-button {
            background-color: #8BC34A; /* é»„ç·‘ */
        }

        #submit-button:hover {
            background-color: #7CB342;
        }

        #feedback-icon {
            font-size: 5em;
            animation: fadeInOut 1.5s forwards; 
            display: inline-block; 
            opacity: 0; 

	    position: absolute;
	    bottom: -20px; /* æ•°å­—ã‚’å¤§ããã™ã‚‹ã¨ä¸Šã®æ–¹ã«è¡¨ç¤ºã•ã‚Œã‚‹ï¼Ÿ */
	    right: 20px; /* æ•°å­—ãŒå°ã•ã„ã»ã©å³ç«¯ã«è¡¨ç¤ºã•ã‚Œã‚‹ï¼Ÿ */
        }

	/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã®èª¿æ•´ */
	@media (max-width: 768px) {
	    #feedback-icon {
	        font-size: 4em;
	        bottom: 20px; /* èª¿æ•´ */
	        right: 20px; /* èª¿æ•´ */
	    }
	}

	@media (max-width: 480px) {
	    #feedback-icon {
	        font-size: 3em;
	        bottom: 15px; /* èª¿æ•´ */
	        right: 15px; /* èª¿æ•´ */
	    }
	}

        .feedback-correct {
            color: #F44336; /* èµ¤ */
	    font-weight: bold; /* ã“ã‚Œã§å¤ªå­—ã«ãªã£ãŸ */
        }

        .feedback-incorrect {
            color: #2196F3; /* é’ */
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: scale(0.5); }
            20% { opacity: 1; transform: scale(1.2); }
            80% { opacity: 1; transform: scale(1); }
            100% { opacity: 1; transform: scale(1); } 
        }

        /* ------------------- çµæœç”»é¢ ------------------- */
        #result-screen {
            display: none;
	    cursor: pointer;
        }

        #result-screen h2 {
            font-size: 2.8em;
            color: #4CAF50;
            margin-bottom: 30px;
        }

        #score-display {
            font-size: 4em;
            font-weight: bold;
            color: #FF5722;
            margin-bottom: 20px;
        }

        #message-display {
            font-size: 1.8em;
            color: #555;
            margin-bottom: 40px;
            line-height: 1.5;
        }

        .result-message {
            font-size: 1.2em;
            color: #666;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 768px) {
            #game-container {
                padding: 20px;
                max-width: 95%;
            }

            #start-screen h1 {
                font-size: 2.5em;
            }

            .difficulty-option {
                font-size: 1.5em;
                padding: 12px 20px;
            }

            #expression-display {
                font-size: 1.8em;
                min-height: 50px;
            }

            .card {
                width: 60px;
                height: 90px;
                font-size: 2.5em;
                margin: 5px;
            }

            .card.operator-card {
                font-size: 2em;
            }

            .card-container {
                gap: 10px;
            }

            .action-button {
                padding: 12px 20px;
                font-size: 1.2em;
            }

            #feedback-icon {
                font-size: 4em;
            }

            #result-screen h2 {
                font-size: 2.2em;
            }

            #score-display {
                font-size: 3em;
            }

            #message-display {
                font-size: 1.5em;
            }
        }

        @media (max-width: 480px) {
            #game-container {
                padding: 15px;
            }

            #start-screen h1 {
                font-size: 2em;
                margin-bottom: 20px;
            }

            .difficulty-option {
                font-size: 1.2em;
                padding: 10px 15px;
                width: 80%;
            }

            #expression-display {
                font-size: 1.5em;
                min-height: 45px;
            }

            .card {
                width: 50px;
                height: 75px;
                font-size: 2em;
                border-width: 1px;
            }

            .card.operator-card {
                font-size: 1.8em;
            }

            .card-container {
                gap: 8px;
            }

            .action-button {
                padding: 10px 15px;
                font-size: 1em;
            }

            #feedback-icon {
                font-size: 3em;
            }

            #result-screen h2 {
                font-size: 1.8em;
            }

            #score-display {
                font-size: 2.5em;
            }

            #message-display {
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="start-screen">
            <h1>make10</h1>
            <div id="start-options-container">
                <div class="start-column">
                    <h2>é›£æ˜“åº¦ã‚’é¸æŠ</h2>
                    <div class="difficulty-options">
                        <div class="difficulty-option" data-difficulty="easy">â˜…åˆç´š</div>
                        <div class="difficulty-option" data-difficulty="medium">â˜…â˜…ä¸­ç´š</div>
                        <div class="difficulty-option" data-difficulty="hard">â˜…â˜…â˜…ä¸Šç´š</div>
                    </div>
                </div>
                <div class="start-column">
                    <h2>ãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠ</h2>
                    <div class="mode-options">
                        <div class="mode-option" data-mode="normal">é€šå¸¸ãƒ¢ãƒ¼ãƒ‰</div>
                        <div class="mode-option" data-mode="timeAttack">ã‚¿ã‚¤ãƒ ã‚¢ã‚¿ãƒƒã‚¯</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="game-screen">
            <div id="game-header">
                <div id="question-counter"></div>
                <div id="timer-display"></div>
            </div>
            <div id="expression-display"></div>
            <div id="number-cards" class="card-container">
                </div>
            <div id="operator-cards" class="card-container">
                <div class="card operator-card" data-value="+">ï¼‹</div>
                <div class="card operator-card" data-value="-">ãƒ¼</div>
                <div class="card operator-card" data-value="*">Ã—</div>
                <div class="card operator-card" data-value="/">Ã·</div>
                <div class="card operator-card" data-value="(">ï¼ˆ</div>
                <div class="card operator-card" data-value=")">ï¼‰</div>
            </div>
            <div class="button-container">
		<button id="undo-button" class="action-button">ï¼‘ã¤æ¶ˆã™</button>
                <button id="reset-button" class="action-button">ã‚„ã‚Šç›´ã—</button>
                <button id="submit-button" class="action-button">æ±ºå®š</button>
            </div>
            <div id="feedback-icon"></div>
        </div>

        <div id="result-screen">
            <h2>çµæœç™ºè¡¨ï¼</h2>
            <div id="score-display"></div>
            <div id="message-display"></div>
            <p class="result-message">ç”»é¢ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã‹ã€Enterã‚­ãƒ¼ã§ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ã«æˆ»ã‚‹</p>
        </div>
    </div>

    <script>
        // ã‚²ãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹å¤‰æ•°
        let currentDifficulty = '';
        let currentGameMode = ''; // â˜…è¿½åŠ 
        let currentExpression = '';
        let availableNumbers = [];
        let usedNumberIndices = [];
        let score = 0;
        let questionCount = 0;
        const totalQuestions = 5;
        let totalAnswered = 0; // â˜…è¿½åŠ 
        let timerInterval; // â˜…è¿½åŠ 
        let timeLeft = 60; // â˜…è¿½åŠ 
        let lastInputWasNumber = false; // ç›´å‰ã®å…¥åŠ›ãŒæ•°å­—ã ã£ãŸã‹ã©ã†ã‹ã‚’è¨˜éŒ²ã™ã‚‹å¤‰æ•°
	let acceptResultScreenInput = false;

        // å•é¡Œãƒ‡ãƒ¼ã‚¿ (åˆç´š142å•(0ã‚’å«ã‚€ã¨æœ¬å½“ã¯175å•ã‚ã‚‹)ã€ä¸­ç´š244å•(0ã‚’å«ã‚€ã¨æœ¬å½“ã¯328å•ã‚ã‚‹)ã€ä¸Šç´š49å•æ‰‹å…¥åŠ›ã—ãŸ)
        const problems = {
            easy: [
		/*{ numbers: [å€¤1, å€¤2, å€¤3, å€¤4], solution: 'æ¨¡ç¯„è§£ç­”' },*/
                { numbers: [1,1,1,7]},
                { numbers: [1,1,1,9]},
                { numbers: [1,1,2,6]},
                { numbers: [1,1,2,8]},
                { numbers: [1,1,3,5]},
                { numbers: [1,1,3,7]},
                { numbers: [1,1,3,9]},
                { numbers: [1,1,4,4]},
                { numbers: [1,1,4,6]},
                { numbers: [1,1,4,8]},
                { numbers: [1,1,5,5]},
                { numbers: [1,1,5,7]},
                { numbers: [1,1,6,6]},
                { numbers: [1,2,2,5]},
                { numbers: [1,2,2,7]},
                { numbers: [1,2,2,9]},
                { numbers: [1,2,3,4]},
                { numbers: [1,2,3,6]},
                { numbers: [1,2,3,8]},
                { numbers: [1,2,4,5]},
                { numbers: [1,2,4,7]},
                { numbers: [1,2,4,9]},
                { numbers: [1,2,5,6]},
                { numbers: [1,2,5,8]},
                { numbers: [1,2,6,7]},
                { numbers: [1,3,3,3]},
                { numbers: [1,3,3,5]},
                { numbers: [1,3,3,9]},
                { numbers: [1,3,4,4]},
                { numbers: [1,3,4,8]},
                { numbers: [1,3,5,7]},
                { numbers: [1,3,5,9]},
                { numbers: [1,3,6,6]},
                { numbers: [1,3,6,8]},
                { numbers: [1,3,7,7]},
                { numbers: [1,4,4,9]},
                { numbers: [1,4,5,8]},
                { numbers: [1,4,6,7]},
                { numbers: [1,4,6,9]},
                { numbers: [1,4,7,8]},
                { numbers: [1,5,5,9]},
                { numbers: [1,5,6,8]},
                { numbers: [1,5,7,7]},
                { numbers: [1,5,7,9]},
                { numbers: [1,5,8,8]},
                { numbers: [1,6,6,9]},
                { numbers: [1,6,7,8]},
                { numbers: [1,6,8,9]},
                { numbers: [1,7,7,9]},
                { numbers: [1,7,8,8]},
                { numbers: [1,7,9,9]},
                { numbers: [1,8,8,9]},
                { numbers: [1,9,9,9]},
                { numbers: [2,2,2,4]},
                { numbers: [2,2,2,8]},
                { numbers: [2,2,3,3]},
                { numbers: [2,2,3,7]},
                { numbers: [2,2,3,9]},
                { numbers: [2,2,4,6]},
                { numbers: [2,2,5,5]},
                { numbers: [2,2,5,9]},
                { numbers: [2,2,6,8]},
                { numbers: [2,2,7,7]},
                { numbers: [2,3,3,6]},
                { numbers: [2,3,3,8]},
                { numbers: [2,3,4,5]},
                { numbers: [2,3,4,7]},
                { numbers: [2,3,4,9]},
                { numbers: [2,3,5,6]},
                { numbers: [2,3,6,9]},
                { numbers: [2,3,7,8]},
                { numbers: [2,4,4,4]},
                { numbers: [2,4,4,8]},
                { numbers: [2,4,5,7]},
                { numbers: [2,4,5,9]},
                { numbers: [2,4,6,6]},
                { numbers: [2,4,7,9]},
                { numbers: [2,4,8,8]},
                { numbers: [2,5,5,8]},
                { numbers: [2,5,6,7]},
                { numbers: [2,5,6,9]},
                { numbers: [2,5,8,9]},
                { numbers: [2,6,6,8]},
                { numbers: [2,6,7,7]},
                { numbers: [2,6,7,9]},
                { numbers: [2,6,9,9]},
                { numbers: [2,7,7,8]},
                { numbers: [2,7,8,9]},
                { numbers: [2,8,8,8]},
                { numbers: [2,8,9,9]},
                { numbers: [3,3,3,7]},
                { numbers: [3,3,4,6]},
                { numbers: [3,3,4,8]},
                { numbers: [3,3,5,5]},
                { numbers: [3,3,5,9]},
                { numbers: [3,3,7,9]},
                { numbers: [3,3,8,8]},
                { numbers: [3,4,4,5]},
                { numbers: [3,4,4,7]},
                { numbers: [3,4,5,6]},
                { numbers: [3,4,5,8]},
                { numbers: [3,4,6,9]},
                { numbers: [3,4,8,9]},
                { numbers: [3,5,5,7]},
                { numbers: [3,5,6,6]},
                { numbers: [3,5,6,8]},
                { numbers: [3,5,7,9]},
                { numbers: [3,5,9,9]},
                { numbers: [3,6,6,7]},
                { numbers: [3,6,7,8]},
                { numbers: [3,6,8,9]},
                { numbers: [3,7,7,7]},
                { numbers: [3,7,8,8]},
                { numbers: [3,7,9,9]},
                { numbers: [3,8,8,9]},
                { numbers: [4,4,4,6]},
                { numbers: [4,4,5,5]},
                { numbers: [4,4,5,7]},
                { numbers: [4,4,6,8]},
                { numbers: [4,4,7,9]},
                { numbers: [4,4,9,9]},
                { numbers: [4,5,5,6]},
                { numbers: [4,5,6,7]},
                { numbers: [4,5,7,8]},
                { numbers: [4,5,8,9]},
                { numbers: [4,6,6,6]},
                { numbers: [4,6,7,7]},
                { numbers: [4,6,8,8]},
                { numbers: [4,6,9,9]},
                { numbers: [4,7,7,8]},
                { numbers: [4,7,8,9]},
                { numbers: [5,5,5,5]},
                { numbers: [5,5,6,6]},
                { numbers: [5,5,7,7]},
                { numbers: [5,5,8,8]},
                { numbers: [5,5,9,9]},
                { numbers: [5,6,6,7]},
                { numbers: [5,6,7,8]},
                { numbers: [5,6,8,9]},
                { numbers: [5,7,7,9]},
                { numbers: [6,6,6,8]},
                { numbers: [6,6,7,9]},
            ],
            medium: [
                { numbers: [1,1,1,4]},
                { numbers: [1,1,1,5]},
                { numbers: [1,1,1,6]},
                { numbers: [1,1,1,8]},
                { numbers: [1,1,2,3]},
                { numbers: [1,1,2,4]},
                { numbers: [1,1,2,5]},
                { numbers: [1,1,2,7]},
                { numbers: [1,1,2,9]},
                { numbers: [1,1,3,3]},
                { numbers: [1,1,3,4]},
                { numbers: [1,1,3,6]},
                { numbers: [1,1,3,8]},
                { numbers: [1,1,4,5]},
                { numbers: [1,1,4,7]},
                { numbers: [1,1,4,9]},
                { numbers: [1,1,5,6]},
                { numbers: [1,1,6,8]},
                { numbers: [1,1,8,9]},
                { numbers: [1,2,2,2]},
                { numbers: [1,2,2,3]},
                { numbers: [1,2,2,4]},
                { numbers: [1,2,2,6]},
                { numbers: [1,2,2,8]},
                { numbers: [1,2,3,3]},
                { numbers: [1,2,3,5]},
                { numbers: [1,2,3,7]},
                { numbers: [1,2,3,9]},
                { numbers: [1,2,4,4]},
                { numbers: [1,2,4,6]},
                { numbers: [1,2,4,8]},
                { numbers: [1,2,5,5]},
                { numbers: [1,2,5,7]},
                { numbers: [1,2,5,9]},
                { numbers: [1,2,6,6]},
                { numbers: [1,2,6,8]},
                { numbers: [1,2,6,8]},
                { numbers: [1,2,6,9]},
                { numbers: [1,2,7,8]},
                { numbers: [1,2,7,9]},
                { numbers: [1,2,8,8]},
                { numbers: [1,2,8,9]},
                { numbers: [1,2,9,9]},
                { numbers: [1,3,3,4]},
                { numbers: [1,3,3,6]},
                { numbers: [1,3,3,8]},
                { numbers: [1,3,4,5]},
                { numbers: [1,3,4,6]},
                { numbers: [1,3,4,7]},
                { numbers: [1,3,4,9]},
                { numbers: [1,3,5,5]},
                { numbers: [1,3,5,6]},
                { numbers: [1,3,5,8]},
                { numbers: [1,3,6,7]},
                { numbers: [1,3,6,9]},
                { numbers: [1,3,7,8]},
                { numbers: [1,3,7,9]},
                { numbers: [1,3,8,9]},
                { numbers: [1,4,4,5]},
                { numbers: [1,4,4,6]},
                { numbers: [1,4,4,7]},
                { numbers: [1,4,4,8]},
                { numbers: [1,4,5,5]},
                { numbers: [1,4,5,6]},
                { numbers: [1,4,5,7]},
                { numbers: [1,4,5,9]},
                { numbers: [1,4,6,6]},
                { numbers: [1,4,6,8]},
                { numbers: [1,4,7,7]},
                { numbers: [1,4,7,9]},
                { numbers: [1,4,8,8]},
                { numbers: [1,4,8,9]},
                { numbers: [1,5,5,6]},
                { numbers: [1,5,5,7]},
                { numbers: [1,5,5,8]},
                { numbers: [1,5,6,7]},
                { numbers: [1,5,6,9]},
                { numbers: [1,5,7,8]},
                { numbers: [1,5,8,9]},
                { numbers: [1,6,6,8]},
                { numbers: [1,6,7,9]},
                { numbers: [1,6,8,8]},
                { numbers: [1,7,7,8]},
                { numbers: [1,7,8,9]},
                { numbers: [1,8,8,8]},
                { numbers: [1,8,9,9]},
                { numbers: [2,2,2,2]},
                { numbers: [2,2,2,3]},
                { numbers: [2,2,2,5]},
                { numbers: [2,2,2,6]},
                { numbers: [2,2,2,7]},
                { numbers: [2,2,2,9]},
                { numbers: [2,2,3,4]},
                { numbers: [2,2,3,5]},
                { numbers: [2,2,3,6]},
                { numbers: [2,2,3,8]},
                { numbers: [2,2,4,4]},
                { numbers: [2,2,4,5]},
                { numbers: [2,2,4,7]},
                { numbers: [2,2,4,8]},
                { numbers: [2,2,4,9]},
                { numbers: [2,2,5,6]},
                { numbers: [2,2,5,8]},
                { numbers: [2,2,6,6]},
                { numbers: [2,2,6,7]},
                { numbers: [2,2,6,9]},
                { numbers: [2,2,7,8]},
                { numbers: [2,2,7,9]},
                { numbers: [2,2,8,8]},
                { numbers: [2,3,3,3]},
                { numbers: [2,3,3,4]},
                { numbers: [2,3,3,5]},
                { numbers: [2,3,3,7]},
                { numbers: [2,3,3,9]},
                { numbers: [2,3,4,4]},
                { numbers: [2,3,4,6]},
                { numbers: [2,3,4,8]},
                { numbers: [2,3,5,5]},
                { numbers: [2,3,5,7]},
                { numbers: [2,3,5,8]},
                { numbers: [2,3,5,9]},
                { numbers: [2,3,6,6]},
                { numbers: [2,3,6,8]},
                { numbers: [2,3,7,7]},
                { numbers: [2,3,7,9]},
                { numbers: [2,3,8,8]},
                { numbers: [2,3,8,9]},
                { numbers: [2,3,9,9]},
                { numbers: [2,4,4,5]},
                { numbers: [2,4,4,6]},
                { numbers: [2,4,4,7]},
                { numbers: [2,4,4,9]},
                { numbers: [2,4,5,5]},
                { numbers: [2,4,5,6]},
                { numbers: [2,4,5,8]},
                { numbers: [2,4,6,7]},
                { numbers: [2,4,6,8]},
                { numbers: [2,4,6,9]},
                { numbers: [2,4,7,8]},
                { numbers: [2,4,8,9]},
                { numbers: [2,4,9,9]},
                { numbers: [2,5,5,5]},
                { numbers: [2,5,5,6]},
                { numbers: [2,5,5,7]},
                { numbers: [2,5,5,9]},
                { numbers: [2,5,6,6]},
                { numbers: [2,5,6,8]},
                { numbers: [2,5,7,7]},
                { numbers: [2,5,7,8]},
                { numbers: [2,5,7,9]},
                { numbers: [2,5,8,8]},
                { numbers: [2,5,9,9]},
                { numbers: [2,6,6,7]},
                { numbers: [2,6,6,9]},
                { numbers: [2,6,7,8]},
                { numbers: [2,6,8,8]},
                { numbers: [2,6,8,9]},
                { numbers: [2,7,7,7]},
                { numbers: [2,7,7,9]},
                { numbers: [2,7,8,8]},
                { numbers: [2,7,9,9]},
                { numbers: [2,8,8,9]},
                { numbers: [2,9,9,9]},
                { numbers: [3,3,3,3]},
                { numbers: [3,3,3,4]},
                { numbers: [3,3,3,6]},
                { numbers: [3,3,3,8]},
                { numbers: [3,3,4,4]},
                { numbers: [3,3,4,5]},
                { numbers: [3,3,4,7]},
                { numbers: [3,3,4,9]},
                { numbers: [3,3,5,6]},
                { numbers: [3,3,5,7]},
                { numbers: [3,3,5,8]},
                { numbers: [3,3,6,6]},
                { numbers: [3,3,6,7]},
                { numbers: [3,3,6,9]},
                { numbers: [3,3,7,7]},
                { numbers: [3,3,7,8]},
                { numbers: [3,3,8,9]},
                { numbers: [3,3,9,9]},
                { numbers: [3,4,4,6]},
                { numbers: [3,4,4,8]},
                { numbers: [3,4,4,9]},
                { numbers: [3,4,5,5]},
                { numbers: [3,4,5,7]},
                { numbers: [3,4,5,9]},
                { numbers: [3,4,6,7]},
                { numbers: [3,4,6,8]},
                { numbers: [3,4,7,7]},
                { numbers: [3,4,7,9]},
                { numbers: [3,4,9,9]},
                { numbers: [3,5,5,5]},
                { numbers: [3,5,5,6]},
                { numbers: [3,5,5,8]},
                { numbers: [3,5,5,9]},
                { numbers: [3,5,6,7]},
                { numbers: [3,5,6,9]},
                { numbers: [3,5,7,8]},
                { numbers: [3,5,8,9]},
                { numbers: [3,6,6,6]},
                { numbers: [3,6,6,8]},
                { numbers: [3,6,7,7]},
                { numbers: [3,6,7,9]},
                { numbers: [3,6,8,8]},
                { numbers: [3,6,9,9]},
                { numbers: [3,7,7,8]},
                { numbers: [3,7,8,9]},
                { numbers: [3,8,8,8]},
                { numbers: [3,8,9,9]},
                { numbers: [4,4,4,5]},
                { numbers: [4,4,4,7]},
                { numbers: [4,4,4,8]},
                { numbers: [4,4,5,6]},
                { numbers: [4,4,5,8]},
                { numbers: [4,4,6,7]},
                { numbers: [4,4,6,9]},
                { numbers: [4,4,7,8]},
                { numbers: [4,4,8,8]},
                { numbers: [4,5,5,5]},
                { numbers: [4,5,5,7]},
                { numbers: [4,5,6,6]},
                { numbers: [4,5,6,8]},
                { numbers: [4,5,6,9]},
                { numbers: [4,5,7,7]},
                { numbers: [4,5,7,9]},
                { numbers: [4,5,8,8]},
                { numbers: [4,5,9,9]},
                { numbers: [4,6,6,7]},
                { numbers: [4,6,6,8]},
                { numbers: [4,6,7,8]},
                { numbers: [4,6,8,9]},
                { numbers: [4,7,7,7]},
                { numbers: [4,7,7,9]},
                { numbers: [4,7,8,8]},
                { numbers: [4,7,9,9]},
                { numbers: [4,8,8,9]},
                { numbers: [5,5,5,6]},
                { numbers: [5,5,5,7]},
                { numbers: [5,5,5,8]},
                { numbers: [5,5,6,7]},
                { numbers: [5,5,6,8]},
                { numbers: [5,5,6,9]},
                { numbers: [5,5,7,8]},
                { numbers: [5,5,7,9]},
                { numbers: [5,5,8,9]},
                { numbers: [5,6,6,6]},
                { numbers: [5,6,7,7]},
                { numbers: [5,6,8,8]},
                { numbers: [5,6,9,9]},
                { numbers: [5,7,8,9]},
                { numbers: [6,6,6,9]},
                { numbers: [6,6,8,8]},
                { numbers: [6,6,8,9]},
                { numbers: [6,7,8,9]},
                { numbers: [6,8,8,9]},
                { numbers: [7,8,9,9]},
            ],
            hard: [
                { numbers: [1,1,5,8]},
                { numbers: [1,1,6,7]},
                { numbers: [1,1,9,9]},
                { numbers: [1,2,7,7]},
                { numbers: [1,3,3,7]},
                { numbers: [1,3,8,8]},
                { numbers: [1,5,5,5]},
                { numbers: [1,5,6,6]},
                { numbers: [1,5,9,9]},
                { numbers: [2,2,8,9]},
                { numbers: [2,2,9,9]},
                { numbers: [2,3,6,7]},
                { numbers: [2,4,7,7]},
                { numbers: [2,6,6,6]},
                { numbers: [3,3,3,5]},
                { numbers: [3,3,3,9]},
                { numbers: [3,3,6,8]},
                { numbers: [3,4,6,6]},
                { numbers: [3,4,7,8]},
                { numbers: [3,4,8,8]},
                { numbers: [3,5,7,7]},
                { numbers: [3,5,8,8]},
                { numbers: [4,4,4,9]},
                { numbers: [4,4,6,6]},
                { numbers: [4,4,8,9]},
                { numbers: [4,5,5,9]},
                { numbers: [4,6,6,9]},
                { numbers: [4,6,7,9]},
                { numbers: [4,8,8,8]},
                { numbers: [5,5,5,9]},
                { numbers: [5,6,6,9]},
                { numbers: [5,6,7,9]},
                { numbers: [5,7,7,7]},
                { numbers: [5,7,7,8]},
                { numbers: [5,8,8,8]},
                { numbers: [5,8,8,9]},
                { numbers: [5,9,9,9]},
                { numbers: [6,6,7,8]},
                { numbers: [6,6,9,9]},
                { numbers: [6,7,7,9]},
                { numbers: [6,7,8,8]},
                { numbers: [6,7,9,9]},
                { numbers: [7,7,7,8]},
                { numbers: [7,7,7,9]},
                { numbers: [7,8,8,9]},
                { numbers: [8,8,8,8]},
                { numbers: [8,8,8,9]},
                { numbers: [8,9,9,9]},
                { numbers: [9,9,9,9]},
            ]
        };

        // ã‚·ãƒ£ãƒƒãƒ•ãƒ«é–¢æ•°
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function safeEval(expression) {
            if (/[^0-9+\-*/().\s]/.test(expression)) {
                throw new Error('Invalid characters in expression');
            }
            return new Function(`return ${expression}`)();
        }

        function validateUsedNumbers() {
            const numbersInExpression = currentExpression.match(/\d+/g) || [];
            if (numbersInExpression.length !== availableNumbers.length) {
                return false;
            }
            const sortedProblemNumbers = [...availableNumbers].sort((a, b) => a - b).join(',');
            const sortedExpressionNumbers = numbersInExpression.map(Number).sort((a, b) => a - b).join(',');
            return sortedProblemNumbers === sortedExpressionNumbers;
        }

        // ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ã®è¦ç´ 
        const startScreen = document.getElementById('start-screen');
        const difficultyOptions = document.querySelectorAll('.difficulty-option');
        const modeOptionsContainer = document.querySelector('.mode-options');
        const modeOptions = document.querySelectorAll('.mode-option');

        // ã‚²ãƒ¼ãƒ ç”»é¢ã®è¦ç´ 
        const gameScreen = document.getElementById('game-screen');
        const questionCounter = document.getElementById('question-counter');
        const timerDisplay = document.getElementById('timer-display');
        const expressionDisplay = document.getElementById('expression-display');
        const numberCardsContainer = document.getElementById('number-cards');
        const operatorCardsContainer = document.getElementById('operator-cards');
        const undoButton = document.getElementById('undo-button');
        const resetButton = document.getElementById('reset-button');
        const submitButton = document.getElementById('submit-button');
        const feedbackIcon = document.getElementById('feedback-icon');

        // çµæœç”»é¢ã®è¦ç´ 
        const resultScreen = document.getElementById('result-screen');
        const scoreDisplay = document.getElementById('score-display');
        const messageDisplay = document.getElementById('message-display');

        // é›£æ˜“åº¦é¸æŠ
        difficultyOptions.forEach(option => {
            option.addEventListener('click', () => {
                // ã‚‚ã—ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‚ã®ãŒæ—¢ã«é¸æŠæ¸ˆã¿ã§ã€ã‹ã¤ãƒ¢ãƒ¼ãƒ‰ã‚‚é¸æŠæ¸ˆã¿ãªã‚‰ã‚²ãƒ¼ãƒ é–‹å§‹
                if (option.classList.contains('selected') && currentGameMode) {
                    startGame();
                    return; // ã‚²ãƒ¼ãƒ ãŒå§‹ã¾ã‚‹ã®ã§ã€ã“ã“ã§å‡¦ç†ã‚’çµ‚äº†
                }

                // é€šå¸¸ã®é¸æŠå‡¦ç†
                difficultyOptions.forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                currentDifficulty = option.dataset.difficulty;
            });
        });

        // ãƒ¢ãƒ¼ãƒ‰é¸æŠ
        modeOptions.forEach(option => {
            option.addEventListener('click', () => {
                // ã‚‚ã—ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‚ã®ãŒæ—¢ã«é¸æŠæ¸ˆã¿ã§ã€ã‹ã¤é›£æ˜“åº¦ã‚‚é¸æŠæ¸ˆã¿ãªã‚‰ã‚²ãƒ¼ãƒ é–‹å§‹
                if (option.classList.contains('selected') && currentDifficulty) {
                    startGame();
                    return; // ã‚²ãƒ¼ãƒ ãŒå§‹ã¾ã‚‹ã®ã§ã€ã“ã“ã§å‡¦ç†ã‚’çµ‚äº†
                }

                // é€šå¸¸ã®é¸æŠå‡¦ç†
                modeOptions.forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                currentGameMode = option.dataset.mode;
            });
        });

        resultScreen.addEventListener('click', () => {
            // æ——ãŒä¸ŠãŒã£ã¦ã„ã‚‹ï¼ˆtrueã®ï¼‰å ´åˆã®ã¿ã€ã‚¿ã‚¤ãƒˆãƒ«ã«æˆ»ã‚‹
            if (acceptResultScreenInput) {
                resetGame();
            }
        });
        
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                if (startScreen.style.display === 'block' && currentDifficulty && currentGameMode) {
                    startGame();
                } else if (resultScreen.style.display === 'block' && acceptResultScreenInput) {
                    // æ——ãŒä¸ŠãŒã£ã¦ã„ã‚‹ï¼ˆtrueã®ï¼‰å ´åˆã®ã¿ã€ã‚¿ã‚¤ãƒˆãƒ«ã«æˆ»ã‚‹
                    resetGame();
                }
            }
        });
        
        function startGame() {
            startScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            score = 0;
            questionCount = 0;
            totalAnswered = 0;
            
            if (currentGameMode === 'timeAttack') {
                timeLeft = 60;
                clearInterval(timerInterval); 
                startTimer();
                loadNextQuestion();
            } else {
                timerDisplay.style.display = 'none';
                loadNextQuestion();
            }
        }

        function startTimer() {
            timerDisplay.style.display = 'block';
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    showResultScreen();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function resetGame() {
            clearInterval(timerInterval);

            startScreen.style.display = 'block';
            gameScreen.style.display = 'none';
            resultScreen.style.display = 'none';
            
            // å„é¸æŠè‚¢ã®é¸æŠçŠ¶æ…‹ã ã‘ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹
            difficultyOptions.forEach(opt => opt.classList.remove('selected'));
            modeOptions.forEach(opt => opt.classList.remove('selected'));

            currentDifficulty = '';
            currentGameMode = '';
            currentExpression = '';
            expressionDisplay.textContent = '';
            feedbackIcon.textContent = '';
            feedbackIcon.classList.remove('feedback-correct', 'feedback-incorrect');
            feedbackIcon.style.opacity = '0';
            lastInputWasNumber = false;
        }

        function loadNextQuestion() {
            if (currentGameMode === 'normal' && questionCount >= totalQuestions) {
                showResultScreen();
                return;
            }

            if (currentGameMode === 'timeAttack') {
                // ã€ä¿®æ­£ã€‘ã€Œæ­£è§£æ•°ã€ã§ã¯ãªãã€ŒæŒ‘æˆ¦ã—ãŸæ•°ã€ã‚’å…ƒã«å•é¡Œç•ªå·ã‚’è¡¨ç¤º
                questionCounter.textContent = `${totalAnswered + 1} å•ç›®`;
            } else {
                questionCount++;
                questionCounter.textContent = `å•é¡Œ ${questionCount} / ${totalQuestions}`;
            }

            currentExpression = '';
            expressionDisplay.textContent = '';
            usedNumberIndices = [];
            feedbackIcon.textContent = '';
            feedbackIcon.classList.remove('feedback-correct', 'feedback-incorrect');
            feedbackIcon.style.opacity = '0';
            lastInputWasNumber = false;

            document.querySelectorAll('.card').forEach(card => {
                card.classList.remove('disabled');
            });

            const problemSet = shuffleArray([...problems[currentDifficulty]]);
            const problem = problemSet[0];
            availableNumbers = shuffleArray([...problem.numbers]);

            renderCards();
        }

        function renderCards() {
            numberCardsContainer.innerHTML = '';
            availableNumbers.forEach((num, index) => {
                const card = document.createElement('div');
                card.classList.add('card', 'number-card');
                card.textContent = num;
                card.dataset.index = index;
                card.addEventListener('click', handleNumberCardClick);
                numberCardsContainer.appendChild(card);
            });
            document.querySelectorAll('#operator-cards .card').forEach(card => {
                card.addEventListener('click', handleOperatorCardClick);
            });
        }

        function handleNumberCardClick(event) {
            const card = event.target;
            const index = parseInt(card.dataset.index);
            if (!card.classList.contains('disabled')) {
                if (lastInputWasNumber) {
                    alert('æ•°å­—ã‚’é€£ç¶šã§ä½¿ç”¨ã—ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚æ¼”ç®—å­ã‹æ‹¬å¼§ã‚’æŒŸã‚“ã§ãã ã•ã„ã€‚');
                    return;
                }
                currentExpression += card.textContent;
                expressionDisplay.textContent = formatExpressionForDisplay(currentExpression);
                card.classList.add('disabled');
                usedNumberIndices.push(index);
                feedbackIcon.style.opacity = '0';
                lastInputWasNumber = true;
            }
        }

        function handleOperatorCardClick(event) {
            const card = event.target;
            currentExpression += card.dataset.value;
            expressionDisplay.textContent = formatExpressionForDisplay(currentExpression);
            feedbackIcon.style.opacity = '0';
            lastInputWasNumber = false;
        }
        
        function formatExpressionForDisplay(expression) {
            return expression.replace(/\*/g, 'Ã—').replace(/\//g, 'Ã·');
        }

        resetButton.addEventListener('click', () => {
            currentExpression = '';
            expressionDisplay.textContent = '';
            usedNumberIndices = [];
            feedbackIcon.textContent = '';
            feedbackIcon.classList.remove('feedback-correct', 'feedback-incorrect');
            feedbackIcon.style.opacity = '0';
            lastInputWasNumber = false;
            document.querySelectorAll('#number-cards .card').forEach(card => {
                card.classList.remove('disabled');
            });
            document.querySelectorAll('#operator-cards .card').forEach(card => {
                card.classList.remove('disabled');
            });
        });

        undoButton.addEventListener('click', () => {
            if (currentExpression.length === 0) return;
            const lastChar = currentExpression.slice(-1);
            if (!isNaN(parseInt(lastChar)) && lastChar !== ' ') {
                const lastUsedIndex = usedNumberIndices.pop();
                const cardToReenable = numberCardsContainer.querySelector(`.card.number-card[data-index="${lastUsedIndex}"]`);
                if (cardToReenable) cardToReenable.classList.remove('disabled');
                lastInputWasNumber = false;
            } else if (lastChar === '(' || lastChar === ')') {
                lastInputWasNumber = false;
            } else {
                lastInputWasNumber = true;
            }
            currentExpression = currentExpression.slice(0, -1);
            expressionDisplay.textContent = formatExpressionForDisplay(currentExpression);
            feedbackIcon.style.opacity = '0';
        });

        function handleSubmit() {
            if (!validateUsedNumbers()) {
                alert('4ã¤ã®æ•°å­—ã‚’æ­£ã—ã1å›ãšã¤ä½¿ã£ã¦ãã ã•ã„ï¼');
                return;
            }
            const openParenCount = (currentExpression.match(/\(/g) || []).length;
            const closeParenCount = (currentExpression.match(/\)/g) || []).length;
            if (openParenCount !== closeParenCount) {
                alert('æ‹¬å¼§ã®æ•°ãŒåˆã£ã¦ã„ã¾ã›ã‚“ï¼');
                return;
            }
            let isCorrect = false;
            try {
                const result = safeEval(currentExpression);
                if (Math.abs(result - 10) < 0.0001) isCorrect = true;
            } catch (e) {
                isCorrect = false;
            }
            showFeedback(isCorrect);
            if (isCorrect) score++;
            if (currentGameMode === 'timeAttack') {
                totalAnswered++;
                loadNextQuestion();
            } else {
                setTimeout(loadNextQuestion, 1500);
            }
        }

        function showFeedback(isCorrect) {
            feedbackIcon.textContent = isCorrect ? 'ã€‡' : 'âœ–';
            feedbackIcon.className = 'feedback-icon';
            feedbackIcon.classList.add(isCorrect ? 'feedback-correct' : 'feedback-incorrect');
            feedbackIcon.style.opacity = '1';
        }

        function showResultScreen() {
            clearInterval(timerInterval);
            gameScreen.style.display = 'none';
            resultScreen.style.display = 'block';
            
            // ã¾ãšã¯å…¥åŠ›ã‚’å—ã‘ä»˜ã‘ãªã„ã‚ˆã†ã«æ——ã‚’ä¸‹ã‚ã™
            acceptResultScreenInput = false;

            // ã‚¿ã‚¤ãƒ ã‚¢ã‚¿ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã ã‘ã€1ç§’å¾Œã«æ——ã‚’ä¸Šã’ã‚‹
            if (currentGameMode === 'timeAttack') {
                setTimeout(() => {
                    acceptResultScreenInput = true;
                }, 1000); // 1000ãƒŸãƒªç§’ = 1ç§’
            } else {
                // é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã¯ã™ãã«æ——ã‚’ä¸Šã’ã‚‹
                acceptResultScreenInput = true;
            }

            // (ã“ã‚Œã‚ˆã‚Šä¸‹ã®çµæœãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºéƒ¨åˆ†ã¯å¤‰æ›´ã‚ã‚Šã¾ã›ã‚“)
            if (currentGameMode === 'timeAttack') {
                scoreDisplay.textContent = `${totalAnswered}å•æŒ‘æˆ¦ã— ${score}å• æ­£è§£ï¼`;
                let message = '';
                if (score <= 1) message = 'ãŠç–²ã‚Œæ§˜ï¼ãƒŠã‚¤ã‚¹ãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼ãã®ä¸€æ­©ãŒå¤§äº‹ã ã‚ˆï¼âœ¨';
                else if (score <= 3) message = 'ã™ã”ã„ï¼ã‹ãªã‚Šè§£ã‘ãŸã­ï¼å›ã¯ã‚‚ã†make10ãƒã‚¹ã‚¿ãƒ¼ã®åµã ï¼ğŸ£';
                else if (score <= 5) message = 'ç´ æ™´ã‚‰ã—ã„ï¼ã“ã‚“ãªã«è§£ã‘ã‚‹ãªã‚“ã¦ï¼å›ã®é ­è„³ã¯ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã ï¼ğŸ’';
                else message = 'ä¿¡ã˜ã‚‰ã‚Œãªã„â€¦ï¼å›ã¯ä¼èª¬ã®make10ã‚´ãƒƒãƒ‰ã ï¼ãŠã‚ã§ã¨ã†ï¼ğŸ‘‘';
                messageDisplay.textContent = message;
            } else { 
                scoreDisplay.textContent = `${score} / ${totalQuestions} ç‚¹`;
                let message = '';
                if (score <= 1) message = 'å¤§ä¸ˆå¤«ï¼å°‘ã—ãšã¤è¨ˆç®—ã«æ…£ã‚Œã¦ã„ã“ã†ï¼';
                else if (score <= 3) message = 'ãã®èª¿å­ï¼ã©ã‚“ã©ã‚“ç·´ç¿’ã—ã¦ã€ï¼‘ï¼ã‚’ãŸãã•ã‚“ã¤ãã‚ã†ï¼';
                else if (score === 4) message = 'ã‚ã¨å°‘ã—ã§ãƒã‚¹ã‚¿ãƒ¼ã ã­ï¼ã¨ã£ã¦ã‚‚è‰¯ã„æ„Ÿã˜ï¼';
                else message = 'å®Œç’§ï¼å›ã¯make10ãƒã‚¹ã‚¿ãƒ¼ã ï¼';
                messageDisplay.textContent = message;
            }
        }

        submitButton.addEventListener('click', handleSubmit);
    </script>
</body>
</html>
